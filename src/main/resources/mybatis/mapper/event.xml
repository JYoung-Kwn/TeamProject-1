<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.event">
	<select id="selectAll" parameterType="int" resultType="event">
		select EVENT_NO,EVENT_NM,EVENT_IMG,EVENT_START,EVENT_END,CLASS_NO, EENABLE
		from event
		where EENABLE=#{eenable}

	</select>

	<select id="selectEndAll" parameterType="int" resultType="event">
		select EVENT_NO,EVENT_NM,EVENT_IMG,EVENT_START,EVENT_END,CLASS_NO, EENABLE
		from event
		where EENABLE =#{eenable}
		order by event_start desc
	</select>
	
	<!-- 게시물 총 갯수 -->
	<select id="count" parameterType="int" resultType="int">
		select count(*) from event where eenable=#{eenable}
	</select>
	
	<select id="selectByPage" parameterType="EventPager" resultType="event">
	select rNum, event_no, event_nm, event_img, event_start, event_end, class_no, eenable
	from (
	      select event_no, event_nm, event_img, event_start, event_end, class_no, eenable, rownum as rNum
	      from event
	      where rownum &lt;= #{endRowNo} and event.eenable=#{eenable}
	      order by event_start desc
	      ) 
	where rNum &gt;=#{startRowNo}
	</select>
	<select id="selectByEndPage" parameterType="EventPager" resultType="event">
		select rNum, event_no, event_nm, event_img, event_start, event_end, class_no, eenable
	from (
	      select event_no, event_nm, event_img, event_start, event_end, class_no, eenable, rownum as rNum
	      from event
	      where rownum &lt;= #{endRowNo} and event.eenable=#{eenable}
	      order by event_start desc
	      ) 
	where rNum &gt;=#{startRowNo}
	
	</select>
	
	<select id="selectEventDetail" parameterType="int" resultType="event">
		select event_no, event_nm, event_start, event_end, event_detail
   		from event
    	where event_no=#{event_no}
	</select>
	
	<!-- 진행중인 가장 최근 이벤트 8 개  -->
	<select id="selectListEight" resultType="event">
		select event_no, event_nm, event_img from event where eenable=1 and rownum &lt;= 8
		order by event_no desc
	</select>
	
</mapper>